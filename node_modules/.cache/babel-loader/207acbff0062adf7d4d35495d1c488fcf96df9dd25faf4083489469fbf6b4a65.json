{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useAuth}from'../components/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MyPage(){const[intro,setIntro]=useState('');const[keyboard,setKeyboard]=useState('');const[mouse,setMouse]=useState('');const[currentUser,setCurrentUser]=useState(null);const{getUserInfo}=useAuth();const maxLength=50;const handleMyInfoSubmit=async e=>{e.preventDefault();// 내 정보 수정\nlet data=new FormData();data.append('userId',currentUser.id);data.append('introduction',intro?intro:currentUser.introduction);if(keyboard)data.append(\"keyboard\",keyboard);if(mouse)data.append(\"mouse\",mouse);let config={method:'POST',// POST 메서드로 변경\nheaders:{Authorization:'Bearer '+localStorage.getItem('access_token'),'Content-Type':'multipart/form-data'},maxBodyLength:Infinity,url:\"/auth/myinfo/update\",data:data};axios.request(config).then(response=>{console.log(JSON.stringify(response.data));alert(\"정보가 수정되었습니다.\");}).catch(error=>{console.log(error);alert(\"정보 수정에 실패하였습니다.\");});};// 사용자 정보 가져오기\nuseEffect(()=>{const fetchData=async()=>{const user=await getUserInfo();setCurrentUser(user);};fetchData();return()=>{};},[getUserInfo]);return/*#__PURE__*/_jsx(\"div\",{className:\"wrap memo\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post-form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"post-form\",onSubmit:handleMyInfoSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"\\uC774\\uB984\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:currentUser?currentUser.name:'',disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\uC774\\uBA54\\uC77C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"\",value:currentUser?currentUser.email:'',disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"intro\",children:\"\\uD504\\uB85C\\uD544 \\uAE00\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"intro\",name:\"intro\",maxLength:maxLength// value={currentUser ? currentUser.introduction : ''}\n,placeholder:currentUser?currentUser.introduction:'',value:intro,onChange:e=>setIntro(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"keyboard\",children:\"\\uB0B4 \\uD0A4\\uBCF4\\uB4DC\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"keyboard\",name:\"keyboard\",onChange:e=>setKeyboard(e.target.files[0])})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"mouse\",children:\"\\uB0B4 \\uB9C8\\uC6B0\\uC2A4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"mouse\",name:\"mouse\",onChange:e=>setMouse(e.target.files[0])})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fileText\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u26A0 1MB \\uC774\\uD558 \\uC774\\uBBF8\\uC9C0\\uB97C \\uCCA8\\uBD80\\uD574\\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u26A0 \\uD0A4\\uBCF4\\uB4DC\\uB294 \\uAC00\\uB85C\\uAC00 \\uB354 \\uAE34 \\uC774\\uBBF8\\uC9C0\\uB85C\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u26A0 \\uBC30\\uACBD\\uC744 \\uC81C\\uAC70\\uD558\\uB294 \\uAC83\\uC744 \\uCD94\\uCC9C\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-buttons\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"p-btn my-btn\",children:\"\\uC218\\uC815\"})})]})]})});}export default MyPage;","map":{"version":3,"names":["React","useState","useEffect","axios","useAuth","jsx","_jsx","jsxs","_jsxs","MyPage","intro","setIntro","keyboard","setKeyboard","mouse","setMouse","currentUser","setCurrentUser","getUserInfo","maxLength","handleMyInfoSubmit","e","preventDefault","data","FormData","append","id","introduction","config","method","headers","Authorization","localStorage","getItem","maxBodyLength","Infinity","url","request","then","response","console","log","JSON","stringify","alert","catch","error","fetchData","user","className","children","onSubmit","htmlFor","type","name","value","disabled","placeholder","email","onChange","target","files"],"sources":["C:/Users/seeun/IdeaProjects/guest-book/src/main/Happy-Desk-Front-main/src/pages/MyPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios';\r\nimport { useAuth } from '../components/AuthContext';\r\n\r\nfunction MyPage() {\r\n\r\n    const [intro, setIntro] = useState('');\r\n    const [keyboard, setKeyboard] = useState('');\r\n    const [mouse, setMouse] = useState('');\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const { getUserInfo } = useAuth();\r\n\r\n    const maxLength = 50;\r\n\r\n    const handleMyInfoSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        // 내 정보 수정\r\n        let data = new FormData();\r\n        data.append('userId', currentUser.id);\r\n        data.append('introduction', intro ? intro : currentUser.introduction);\r\n        if (keyboard) data.append(\"keyboard\", keyboard);\r\n        if (mouse) data.append(\"mouse\", mouse);\r\n\r\n        let config = {\r\n            method: 'POST', // POST 메서드로 변경\r\n            headers: {\r\n                Authorization: 'Bearer ' + localStorage.getItem('access_token'),\r\n                'Content-Type': 'multipart/form-data',\r\n            },\r\n            maxBodyLength: Infinity,\r\n            url: `/auth/myinfo/update`,\r\n            data: data,\r\n        };\r\n\r\n        axios.request(config)\r\n            .then((response) => {\r\n                console.log(JSON.stringify(response.data));\r\n                alert(\"정보가 수정되었습니다.\")\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n                alert(\"정보 수정에 실패하였습니다.\")\r\n            });\r\n    }\r\n\r\n\r\n    // 사용자 정보 가져오기\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            const user = await getUserInfo();\r\n            setCurrentUser(user);\r\n        };\r\n\r\n        fetchData();\r\n\r\n        return () => {\r\n        };\r\n    }, [getUserInfo]);\r\n\r\n    return (\r\n        <div className='wrap memo'>\r\n            {/* <button className='logout-btn' onClick={handleLogout}>로그아웃</button> */}\r\n            <div className='post-form-container'>\r\n                <h1>마이페이지</h1>\r\n                <form className=\"post-form\" onSubmit={handleMyInfoSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"name\">이름</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"name\"\r\n                            name=\"name\"\r\n                            value={currentUser ? currentUser.name : ''}\r\n                            disabled\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"email\">이메일</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            id=\"email\"\r\n                            name=\"email\"\r\n                            placeholder=''\r\n                            value={currentUser ? currentUser.email : ''}\r\n                            disabled\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"intro\">프로필 글</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"intro\"\r\n                            name=\"intro\"\r\n                            maxLength={maxLength}\r\n                            // value={currentUser ? currentUser.introduction : ''}\r\n                            placeholder={currentUser ? currentUser.introduction : ''}\r\n                            value={intro}\r\n                            onChange={(e) => setIntro(e.target.value)}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"keyboard\">내 키보드</label>\r\n                        <input\r\n                            type=\"file\"\r\n                            id=\"keyboard\"\r\n                            name=\"keyboard\"\r\n                            onChange={(e) => setKeyboard(e.target.files[0])}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"mouse\">내 마우스</label>\r\n                        <input\r\n                            type=\"file\"\r\n                            id=\"mouse\"\r\n                            name=\"mouse\"\r\n                            onChange={(e) => setMouse(e.target.files[0])}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className='fileText'>\r\n                        <div>⚠ 1MB 이하 이미지를 첨부해주세요.</div>\r\n                        <div>⚠ 키보드는 가로가 더 긴 이미지로</div>\r\n                        <div>⚠ 배경을 제거하는 것을 추천</div>\r\n                    </div>\r\n\r\n                    <div className=\"form-buttons\">\r\n                        <button type=\"submit\" className=\"p-btn my-btn\">수정</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}