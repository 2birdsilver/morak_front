{"ast":null,"code":"var _jsxFileName = \"C:\\\\morak\\\\morak_front\\\\src\\\\pages\\\\Memo.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport keyboard from \"../images/keyboard.png\";\nimport mouse from \"../images/mouse.png\";\nimport anonymous from \"../images/anonymous-icon3.png\";\nimport authenticated from \"../images/authenticated-icon3.png\";\nimport Modal from \"../components/MemoDetail\";\nimport PasswordModal from \"../components/PasswordModal\";\nimport keyboardBased from \"../images/keyboard.png\";\nimport mouseBased from \"../images/mouse.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Memo({\n  memo\n}) {\n  _s();\n  const {\n    id\n  } = useParams(); // URL에서 id 값을 가져오기\n  const navigate = useNavigate(); // 페이지 네비게이션을 위한 Hook\n  const [memos, setMemos] = useState([]); // 메모 목록 상태 관리\n  const [name, setName] = useState(\"\"); // 사용자 이름 상태 관리\n  const [isModalOpen, setIsModalOpen] = useState(false); // 모달 열림/닫힘 상태 관리\n  const [modalContent, setModalContent] = useState(\"\"); // 모달에 표시될 내용 관리\n  const [modalDate, setModalDate] = useState(\"\"); // 모달에 표시될 날짜 관리\n  const [modalWriter, setModalWriter] = useState(\"\");\n  const [modalShape, setModalShape] = useState(\"\"); // 모달 모양(디자인) 상태 관리\n  const [editingMemoId, setEditingMemoId] = useState(null); //수정 상태 관리\n  const [isPasswordModalOpen, setIsPasswordModalOpen] = useState(false);\n  const [keyboardUrl, setKeyboardUrl] = useState(\"\");\n  const [mouseUrl, setMouseUrl] = useState(\"\");\n  useEffect(() => {}, []);\n\n  // 메모 작성 페이지로 이동하는 함수\n  const goToCreateMemo = () => {\n    navigate(`/postit/${id}/`);\n  };\n\n  // 홈 페이지로 이동하는 함수\n  const goToHome = () => {\n    navigate(\"/\");\n  };\n\n  // 프린트\n  const getPrintPaper = () => {\n    if (memos) {\n      navigate(\"/print\", {\n        state: {\n          memos: memos,\n          name: name\n        }\n      });\n    }\n  };\n\n  // 메모 클릭 핸들러 함수\n  const handleMemoClick = memo => {\n    setModalDate(memo.date);\n    setModalContent(memo.content);\n    setModalWriter(memo.writer);\n    setEditingMemoId(memo.id);\n    setIsModalOpen(true);\n    setModalShape(memo.shape);\n  };\n\n  // 모달 닫기 함수\n  const closeModal = () => {\n    setIsModalOpen(false);\n    setModalContent(\"\");\n    setEditingMemoId(null);\n  };\n\n  // 메모 수정 페이지로 이동하는 함수\n  const handleEditClick = () => {\n    navigate(`/postit/${editingMemoId}?edit=true`);\n    setIsModalOpen(false);\n  };\n\n  // 메모 삭제 함수 수정\n  const handleDeleteClick = memoId => {\n    setIsPasswordModalOpen(true);\n    setEditingMemoId(memoId);\n  };\n\n  // 비밀번호 모달에서 확인을 눌렀을 때 실행될 함수\n  const handlePasswordConfirm = async password => {\n    console.log(\"입력된 비밀번호:\", password);\n    console.log(\"입력된 메모id:\", editingMemoId);\n    // 비밀번호와 메모 ID를 서버에 전송\n    try {\n      const response = await fetch(\"/api/memo/delete\", {\n        method: \"POST\",\n        // 메소드를 DELETE로 변경\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          memoId: editingMemoId,\n          // 삭제하려는 메모의 ID\n          password: password // 사용자가 입력한 비밀번호\n        })\n      });\n      if (response.status === 202) {\n        alert(\"메모를 삭제하였습니다.\");\n        closeModal();\n        setMemos(memos.filter(memo => memo.id !== editingMemoId));\n      } else if (response.status === 401) {\n        alert(\"비밀번호를 잘못 입력하였습니다. 비밀번호 문의는 leesu@kcc.co.kr\");\n      } else {\n        // 그 외의 경우, 일반적인 에러 처리\n        alert(\"메모 삭제 실패: 알 수 없는 에러 발생\");\n      }\n    } catch (error) {\n      console.error(\"메모 삭제 요청 중 오류 발생\", error);\n      alert(\"메모 삭제 과정에서 오류가 발생했습니다.\");\n      // 네트워크 오류 또는 요청 실패 처리\n    }\n\n    // 비밀번호 입력이 완료되면 모달을 닫음\n    setIsPasswordModalOpen(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrap memo\",\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      className: `MemoDetail-content ${modalShape === \"heart\" ? \"heart\" : \"\"}`,\n      content: props.content,\n      date: props.createDt,\n      writer: props.writer,\n      onClose: closeModal,\n      onDelete: () => handleDeleteClick(editingMemoId),\n      onEdit: () => handleEditClick(editingMemoId)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n_s(Memo, \"hBbJEfbKYgF64tNnRD3pbEbyPaE=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Memo;\nexport default Memo;\nvar _c;\n$RefreshReg$(_c, \"Memo\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useParams","useNavigate","keyboard","mouse","anonymous","authenticated","Modal","PasswordModal","keyboardBased","mouseBased","jsxDEV","_jsxDEV","Memo","memo","_s","id","navigate","memos","setMemos","name","setName","isModalOpen","setIsModalOpen","modalContent","setModalContent","modalDate","setModalDate","modalWriter","setModalWriter","modalShape","setModalShape","editingMemoId","setEditingMemoId","isPasswordModalOpen","setIsPasswordModalOpen","keyboardUrl","setKeyboardUrl","mouseUrl","setMouseUrl","goToCreateMemo","goToHome","getPrintPaper","state","handleMemoClick","date","content","writer","shape","closeModal","handleEditClick","handleDeleteClick","memoId","handlePasswordConfirm","password","console","log","response","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","status","alert","filter","error","className","children","props","createDt","onClose","onDelete","onEdit","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/morak/morak_front/src/pages/Memo.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport keyboard from \"../images/keyboard.png\";\r\nimport mouse from \"../images/mouse.png\";\r\nimport anonymous from \"../images/anonymous-icon3.png\";\r\nimport authenticated from \"../images/authenticated-icon3.png\";\r\nimport Modal from \"../components/MemoDetail\";\r\nimport PasswordModal from \"../components/PasswordModal\";\r\nimport keyboardBased from \"../images/keyboard.png\";\r\nimport mouseBased from \"../images/mouse.png\";\r\n\r\nfunction Memo({ memo }) {\r\n  const { id } = useParams(); // URL에서 id 값을 가져오기\r\n  const navigate = useNavigate(); // 페이지 네비게이션을 위한 Hook\r\n  const [memos, setMemos] = useState([]); // 메모 목록 상태 관리\r\n  const [name, setName] = useState(\"\"); // 사용자 이름 상태 관리\r\n  const [isModalOpen, setIsModalOpen] = useState(false); // 모달 열림/닫힘 상태 관리\r\n  const [modalContent, setModalContent] = useState(\"\"); // 모달에 표시될 내용 관리\r\n  const [modalDate, setModalDate] = useState(\"\"); // 모달에 표시될 날짜 관리\r\n  const [modalWriter, setModalWriter] = useState(\"\");\r\n  const [modalShape, setModalShape] = useState(\"\"); // 모달 모양(디자인) 상태 관리\r\n  const [editingMemoId, setEditingMemoId] = useState(null); //수정 상태 관리\r\n  const [isPasswordModalOpen, setIsPasswordModalOpen] = useState(false);\r\n\r\n  const [keyboardUrl, setKeyboardUrl] = useState(\"\");\r\n  const [mouseUrl, setMouseUrl] = useState(\"\");\r\n\r\n  useEffect(() => {}, []);\r\n\r\n  // 메모 작성 페이지로 이동하는 함수\r\n  const goToCreateMemo = () => {\r\n    navigate(`/postit/${id}/`);\r\n  };\r\n\r\n  // 홈 페이지로 이동하는 함수\r\n  const goToHome = () => {\r\n    navigate(\"/\");\r\n  };\r\n\r\n  // 프린트\r\n  const getPrintPaper = () => {\r\n    if (memos) {\r\n      navigate(\"/print\", { state: { memos: memos, name: name } });\r\n    }\r\n  };\r\n\r\n  // 메모 클릭 핸들러 함수\r\n  const handleMemoClick = (memo) => {\r\n    setModalDate(memo.date);\r\n    setModalContent(memo.content);\r\n    setModalWriter(memo.writer);\r\n    setEditingMemoId(memo.id);\r\n    setIsModalOpen(true);\r\n    setModalShape(memo.shape);\r\n  };\r\n\r\n  // 모달 닫기 함수\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n    setModalContent(\"\");\r\n    setEditingMemoId(null);\r\n  };\r\n\r\n  // 메모 수정 페이지로 이동하는 함수\r\n  const handleEditClick = () => {\r\n    navigate(`/postit/${editingMemoId}?edit=true`);\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  // 메모 삭제 함수 수정\r\n  const handleDeleteClick = (memoId) => {\r\n    setIsPasswordModalOpen(true);\r\n    setEditingMemoId(memoId);\r\n  };\r\n\r\n  // 비밀번호 모달에서 확인을 눌렀을 때 실행될 함수\r\n  const handlePasswordConfirm = async (password) => {\r\n    console.log(\"입력된 비밀번호:\", password);\r\n    console.log(\"입력된 메모id:\", editingMemoId);\r\n    // 비밀번호와 메모 ID를 서버에 전송\r\n    try {\r\n      const response = await fetch(\"/api/memo/delete\", {\r\n        method: \"POST\", // 메소드를 DELETE로 변경\r\n        headers: {\r\n          Authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          memoId: editingMemoId, // 삭제하려는 메모의 ID\r\n          password: password, // 사용자가 입력한 비밀번호\r\n        }),\r\n      });\r\n\r\n      if (response.status === 202) {\r\n        alert(\"메모를 삭제하였습니다.\");\r\n        closeModal();\r\n        setMemos(memos.filter((memo) => memo.id !== editingMemoId));\r\n      } else if (response.status === 401) {\r\n        alert(\r\n          \"비밀번호를 잘못 입력하였습니다. 비밀번호 문의는 leesu@kcc.co.kr\"\r\n        );\r\n      } else {\r\n        // 그 외의 경우, 일반적인 에러 처리\r\n        alert(\"메모 삭제 실패: 알 수 없는 에러 발생\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"메모 삭제 요청 중 오류 발생\", error);\r\n      alert(\"메모 삭제 과정에서 오류가 발생했습니다.\");\r\n      // 네트워크 오류 또는 요청 실패 처리\r\n    }\r\n\r\n    // 비밀번호 입력이 완료되면 모달을 닫음\r\n    setIsPasswordModalOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"wrap memo\">\r\n      <Modal\r\n        className={`MemoDetail-content ${\r\n          modalShape === \"heart\" ? \"heart\" : \"\"\r\n        }`}\r\n        content={props.content}\r\n        date={props.createDt}\r\n        writer={props.writer}\r\n        onClose={closeModal}\r\n        onDelete={() => handleDeleteClick(editingMemoId)}\r\n        onEdit={() => handleEditClick(editingMemoId)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Memo;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}